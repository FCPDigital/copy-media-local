{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/components/carousel.js","src/js/components/thumbnails.js","src/js/components/toggler.js","src/js/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","function Carousel(element) {\n  this.element = element;\n  this.headItems = this.element.querySelectorAll(\".carousel__header-item\");\n  this.items = this.element.querySelectorAll(\".carousel__body-item\"); \n  this._current = 0;\n  this.initEvents();\n}\n\nCarousel.prototype = {\n  get current() {\n    if( this._current >= 0 ) {\n      return this._current;\n    }\n    for(var i=0; i<this.headItems.length; i++) {\n      if( this.headItems[i].classList.contains(\"carousel__header-item--active\") ) {\n        return i;\n      }\n    }\n    this.current = 0; \n    return 0; \n  },\n\n  set current(value) {\n    if( value !== this.current ) {\n      this.hide(this.current);\n      setTimeout((function(){\n        this.show(value);\n      }).bind(this), 350)\n    }\n    var last = this._current; \n    this._current = value;\n    this.onChange.call(this, this.items[this.current], this.items[last], this.current);\n  },\n\n  getHead: function(rank){\n    return this.headItems[rank];\n  },\n\n  getBody: function(rank){\n    return this.items[rank];\n  },\n\n  hide: function(rank) {\n    this.headItems[rank].classList.remove(\"carousel__header-item--active\");\n    this.items[rank].classList.replace(\"carousel__body-item--visible\", \"carousel__body-item--hidding\");\n    setTimeout((function(){\n      this.items[rank].classList.replace(\"carousel__body-item--hidding\", \"carousel__body-item--hidden\");\n    }).bind(this), 350)\n  },\n\n  show: function(rank) {\n    this.headItems[rank].classList.add(\"carousel__header-item--active\");\n    this.items[rank].classList.replace(\"carousel__body-item--hidden\", \"carousel__body-item--hidding\");\n    this.items[rank].classList.replace(\"carousel__body-item--hidding\", \"carousel__body-item--visible\");\n  },\n\n  initHeadEvent: function(element, rank) {\n    var self = this;\n    element.addEventListener(\"click\", function(e){\n      self.current = rank;\n      e.preventDefault();\n    })\n  },\n\n  initEvents: function() {\n    for(var i=0; i<this.headItems.length; i++) {\n      this.initHeadEvent(this.headItems[i], i);\n    }\n  },\n\n  onChange: function(callback) {\n    this.onChange = callback;\n  }\n}\n\nexport default Carousel;","function Thumbnails(element) {\n  this.element = element;\n  this.items = element.querySelectorAll(\".thumbnail\");\n  this._current = null;\n}\n\nThumbnails.prototype = {\n\n  get current(){\n    if( this._current >= 0 ){\n      return this._current;\n    }\n    this.current = 0; \n    return 0; \n  },\n\n  set current(value) {\n    if( this._current ) {\n      this.hide(this.current);\n    } \n\n    this.show(value);\n    this._current = value;\n  },\n\n  hide: function(rank) {\n    this.items[rank].classList.replace(\"thumbnail--visible\", \"thumbnail--hidden\");\n  },\n \n  show: function(rank) {\n    this.items[rank].classList.replace(\"thumbnail--hidden\", \"thumbnail--visible\");\n  }\n}\n\n\nexport default Thumbnails;","function Toggler(element) {\n  this.element = element;\n  this.getTargets();\n  this.initEvents();\n}\n\nToggler.prototype = {\n\n  getTargets: function() {\n    this.selectors = this.element.getAttribute(\"data-toggle-target\").split(/,\\s?/);\n    this.modifiers = this.element.getAttribute(\"data-toggle-modifier\").split(/,\\s?/);\n    this.targets = [];\n    for(var i=0; i<this.selectors.length; i++) {\n      this.targets.push(document.querySelector(this.selectors[i]));\n      if( !this.modifiers[i] ) {\n        this.modifiers[i] = \"hidden\";\n      }\n    }\n  },\n\n  toggle: function(){\n    for(var i=0; i<this.targets.length; i++) {\n      this.targets[i].classList.toggle(this.modifiers[i])\n    }\n  },\n\n  initEvents: function() {\n    var self = this;\n    this.element.addEventListener(\"click\", function(e){\n      self.toggle();\n      e.preventDefault();\n    })\n  }\n}\n\nvar TogglerManager = {\n\n  togglers: [],\n\n  findByElement: function(element) {\n    for(var i=0; i<this.togglers.length; i++) {\n      if(this.togglers[i].element === element) {\n        return this.togglers[i]\n      }\n    }\n  },\n  \n  init: function() {\n    var elements = document.querySelectorAll(\"*[data-toggle-target]\");\n    for(var i=0; i<elements.length; i++) {\n      this.togglers.push(new Toggler(elements[i]));\n    }\n  }\n}\n\nexport {Toggler};\n\nexport default TogglerManager;","import Carousel from \"./components/carousel.js\";\nimport Thumbnails from \"./components/thumbnails.js\";\nimport TogglerManager from \"./components/toggler.js\";\nimport {Toggler} from \"./components/toggler.js\";\n\n\nvar offsetTop = function(element) {\n    var top = 0, left = 0;\n    do {\n        top += element.offsetTop  || 0;\n        left += element.offsetLeft || 0;\n        element = element.offsetParent;\n    } while(element);\n\n    return {\n        top: top,\n        left: left\n    };\n};\n\nObject.defineProperties(window, {\n    scrollTop: {\n        get: function() {\n            return (document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop;\n        },\n        set: function(value) {\n            var scrollTop = ((document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop);\n            scrollTop = value;\n        }\n    }\n});\n\nfunction manageHomeCarousel(){\n  if (document.querySelector(\"#home-carousel\")) {\n    var sectionCarousel = document.querySelector(\"#anchor-2\");\n\n    var thumbnails = new Thumbnails(sectionCarousel.querySelector(\".thumbnails\"));\n    var carousel = new Carousel(document.querySelector(\"#home-carousel\"));\n    carousel.onChange = function(current, last, rank) {\n      //last.querySelector(\".btn-morph-cross\").click();\n      var toggler = TogglerManager.findByElement(last.querySelector(\".btn-morph-cross\"));\n      if( toggler && toggler.element.classList.contains(\"btn-morph-cross--active\") ) {\n        toggler.toggle();\n      }\n      thumbnails.current = rank;\n    }\n  }\n}\n\n\nwindow.addEventListener(\"load\", function(){\n  manageHomeCarousel();\n  TogglerManager.init();\n});"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY29tcG9uZW50cy9jYXJvdXNlbC5qcyIsInNyYy9qcy9jb21wb25lbnRzL3RodW1ibmFpbHMuanMiLCJzcmMvanMvY29tcG9uZW50cy90b2dnbGVyLmpzIiwic3JjL2pzL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0FDQUEsU0FBUyxRQUFULENBQWtCLE9BQWxCLEVBQTJCO0FBQ3pCLE9BQUssT0FBTCxHQUFlLE9BQWY7QUFDQSxPQUFLLFNBQUwsR0FBaUIsS0FBSyxPQUFMLENBQWEsZ0JBQWIsQ0FBOEIsd0JBQTlCLENBQWpCO0FBQ0EsT0FBSyxLQUFMLEdBQWEsS0FBSyxPQUFMLENBQWEsZ0JBQWIsQ0FBOEIsc0JBQTlCLENBQWI7QUFDQSxPQUFLLFFBQUwsR0FBZ0IsQ0FBaEI7QUFDQSxPQUFLLFVBQUw7QUFDRDs7QUFFRCxTQUFTLFNBQVQsR0FBcUI7QUFDbkIsTUFBSSxPQUFKLEdBQWM7QUFDWixRQUFJLEtBQUssUUFBTCxJQUFpQixDQUFyQixFQUF5QjtBQUN2QixhQUFPLEtBQUssUUFBWjtBQUNEO0FBQ0QsU0FBSSxJQUFJLElBQUUsQ0FBVixFQUFhLElBQUUsS0FBSyxTQUFMLENBQWUsTUFBOUIsRUFBc0MsR0FBdEMsRUFBMkM7QUFDekMsVUFBSSxLQUFLLFNBQUwsQ0FBZSxDQUFmLEVBQWtCLFNBQWxCLENBQTRCLFFBQTVCLENBQXFDLCtCQUFyQyxDQUFKLEVBQTRFO0FBQzFFLGVBQU8sQ0FBUDtBQUNEO0FBQ0Y7QUFDRCxTQUFLLE9BQUwsR0FBZSxDQUFmO0FBQ0EsV0FBTyxDQUFQO0FBQ0QsR0Faa0I7O0FBY25CLE1BQUksT0FBSixDQUFZLEtBQVosRUFBbUI7QUFDakIsUUFBSSxVQUFVLEtBQUssT0FBbkIsRUFBNkI7QUFDM0IsV0FBSyxJQUFMLENBQVUsS0FBSyxPQUFmO0FBQ0EsaUJBQVksWUFBVTtBQUNwQixhQUFLLElB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bUIsa0JBQW5CLENBQTdCLENBQWQ7QUFDQSxnQkFBSSxXQUFXLFFBQVEsT0FBUixDQUFnQixTQUFoQixDQUEwQixRQUExQixDQUFtQyx5QkFBbkMsQ0FBZixFQUErRTtBQUM3RSx3QkFBUSxNQUFSO0FBQ0Q7QUFDRCx1QkFBVyxPQUFYLEdBQXFCLElBQXJCO0FBQ0QsU0FQRDtBQVFEO0FBQ0Y7O0FBR0QsT0FBTyxnQkFBUCxDQUF3QixNQUF4QixFQUFnQyxZQUFVO0FBQ3hDO0FBQ0Esc0JBQWUsSUFBZjtBQUNELENBSEQiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJmdW5jdGlvbiBDYXJvdXNlbChlbGVtZW50KSB7XG4gIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gIHRoaXMuaGVhZEl0ZW1zID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2Fyb3VzZWxfX2hlYWRlci1pdGVtXCIpO1xuICB0aGlzLml0ZW1zID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2Fyb3VzZWxfX2JvZHktaXRlbVwiKTsgXG4gIHRoaXMuX2N1cnJlbnQgPSAwO1xuICB0aGlzLmluaXRFdmVudHMoKTtcbn1cblxuQ2Fyb3VzZWwucHJvdG90eXBlID0ge1xuICBnZXQgY3VycmVudCgpIHtcbiAgICBpZiggdGhpcy5fY3VycmVudCA+PSAwICkge1xuICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnQ7XG4gICAgfVxuICAgIGZvcih2YXIgaT0wOyBpPHRoaXMuaGVhZEl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiggdGhpcy5oZWFkSXRlbXNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2Fyb3VzZWxfX2hlYWRlci1pdGVtLS1hY3RpdmVcIikgKSB7XG4gICAgICAgIHJldHVybiBpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmN1cnJlbnQgPSAwOyBcbiAgICByZXR1cm4gMDsgXG4gIH0sXG5cbiAgc2V0IGN1cnJlbnQodmFsdWUpIHtcbiAgICBpZiggdmFsdWUgIT09IHRoaXMuY3VycmVudCApIHtcbiAgICAgIHRoaXMuaGlkZSh0aGlzLmN1cnJlbnQpO1xuICAgICAgc2V0VGltZW91dCgoZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy5zaG93KHZhbHVlKTtcbiAgICAgIH0pLmJpbmQodGhpcyksIDM1MClcbiAgICB9XG4gICAgdmFyIGxhc3QgPSB0aGlzLl9jdXJyZW50OyBcbiAgICB0aGlzLl9jdXJyZW50ID0gdmFsdWU7XG4gICAgdGhpcy5vbkNoYW5nZS5jYWxsKHRoaXMsIHRoaXMuaXRlbXNbdGhpcy5jdXJyZW50XSwgdGhpcy5pdGVtc1tsYXN0XSwgdGhpcy5jdXJyZW50KTtcbiAgfSxcblxuICBnZXRIZWFkOiBmdW5jdGlvbihyYW5rKXtcbiAgICByZXR1cm4gdGhpcy5oZWFkSXRlbXNbcmFua107XG4gIH0sXG5cbiAgZ2V0Qm9keTogZnVuY3Rpb24ocmFuayl7XG4gICAgcmV0dXJuIHRoaXMuaXRlbXNbcmFua107XG4gIH0sXG5cbiAgaGlkZTogZnVuY3Rpb24ocmFuaykge1xuICAgIHRoaXMuaGVhZEl0ZW1zW3JhbmtdLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJvdXNlbF9faGVhZGVyLWl0ZW0tLWFjdGl2ZVwiKTtcbiAgICB0aGlzLml0ZW1zW3JhbmtdLmNsYXNzTGlzdC5yZXBsYWNlKFwiY2Fyb3VzZWxfX2JvZHktaXRlbS0tdmlzaWJsZVwiLCBcImNhcm91c2VsX19ib2R5LWl0ZW0tLWhpZGRpbmdcIik7XG4gICAgc2V0VGltZW91dCgoZnVuY3Rpb24oKXtcbiAgICAgIHRoaXMuaXRlbXNbcmFua10uY2xhc3NMaXN0LnJlcGxhY2UoXCJjYXJvdXNlbF9fYm9keS1pdGVtLS1oaWRkaW5nXCIsIFwiY2Fyb3VzZWxfX2JvZHktaXRlbS0taGlkZGVuXCIpO1xuICAgIH0pLmJpbmQodGhpcyksIDM1MClcbiAgfSxcblxuICBzaG93OiBmdW5jdGlvbihyYW5rKSB7XG4gICAgdGhpcy5oZWFkSXRlbXNbcmFua10uY2xhc3NMaXN0LmFkZChcImNhcm91c2VsX19oZWFkZXItaXRlbS0tYWN0aXZlXCIpO1xuICAgIHRoaXMuaXRlbXNbcmFua10uY2xhc3NMaXN0LnJlcGxhY2UoXCJjYXJvdXNlbF9fYm9keS1pdGVtLS1oaWRkZW5cIiwgXCJjYXJvdXNlbF9fYm9keS1pdGVtLS1oaWRkaW5nXCIpO1xuICAgIHRoaXMuaXRlbXNbcmFua10uY2xhc3NMaXN0LnJlcGxhY2UoXCJjYXJvdXNlbF9fYm9keS1pdGVtLS1oaWRkaW5nXCIsIFwiY2Fyb3VzZWxfX2JvZHktaXRlbS0tdmlzaWJsZVwiKTtcbiAgfSxcblxuICBpbml0SGVhZEV2ZW50OiBmdW5jdGlvbihlbGVtZW50LCByYW5rKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpe1xuICAgICAgc2VsZi5jdXJyZW50ID0gcmFuaztcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KVxuICB9LFxuXG4gIGluaXRFdmVudHM6IGZ1bmN0aW9uKCkge1xuICAgIGZvcih2YXIgaT0wOyBpPHRoaXMuaGVhZEl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLmluaXRIZWFkRXZlbnQodGhpcy5oZWFkSXRlbXNbaV0sIGkpO1xuICAgIH1cbiAgfSxcblxuICBvbkNoYW5nZTogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICB0aGlzLm9uQ2hhbmdlID0gY2FsbGJhY2s7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2Fyb3VzZWw7IiwiZnVuY3Rpb24gVGh1bWJuYWlscyhlbGVtZW50KSB7XG4gIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gIHRoaXMuaXRlbXMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGh1bWJuYWlsXCIpO1xuICB0aGlzLl9jdXJyZW50ID0gbnVsbDtcbn1cblxuVGh1bWJuYWlscy5wcm90b3R5cGUgPSB7XG5cbiAgZ2V0IGN1cnJlbnQoKXtcbiAgICBpZiggdGhpcy5fY3VycmVudCA+PSAwICl7XG4gICAgICByZXR1cm4gdGhpcy5fY3VycmVudDtcbiAgICB9XG4gICAgdGhpcy5jdXJyZW50ID0gMDsgXG4gICAgcmV0dXJuIDA7IFxuICB9LFxuXG4gIHNldCBjdXJyZW50KHZhbHVlKSB7XG4gICAgaWYoIHRoaXMuX2N1cnJlbnQgKSB7XG4gICAgICB0aGlzLmhpZGUodGhpcy5jdXJyZW50KTtcbiAgICB9IFxuXG4gICAgdGhpcy5zaG93KHZhbHVlKTtcbiAgICB0aGlzLl9jdXJyZW50ID0gdmFsdWU7XG4gIH0sXG5cbiAgaGlkZTogZnVuY3Rpb24ocmFuaykge1xuICAgIHRoaXMuaXRlbXNbcmFua10uY2xhc3NMaXN0LnJlcGxhY2UoXCJ0aHVtYm5haWwtLXZpc2libGVcIiwgXCJ0aHVtYm5haWwtLWhpZGRlblwiKTtcbiAgfSxcbiBcbiAgc2hvdzogZnVuY3Rpb24ocmFuaykge1xuICAgIHRoaXMuaXRlbXNbcmFua10uY2xhc3NMaXN0LnJlcGxhY2UoXCJ0aHVtYm5haWwtLWhpZGRlblwiLCBcInRodW1ibmFpbC0tdmlzaWJsZVwiKTtcbiAgfVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IFRodW1ibmFpbHM7IiwiZnVuY3Rpb24gVG9nZ2xlcihlbGVtZW50KSB7XG4gIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gIHRoaXMuZ2V0VGFyZ2V0cygpO1xuICB0aGlzLmluaXRFdmVudHMoKTtcbn1cblxuVG9nZ2xlci5wcm90b3R5cGUgPSB7XG5cbiAgZ2V0VGFyZ2V0czogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZWxlY3RvcnMgPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS10b2dnbGUtdGFyZ2V0XCIpLnNwbGl0KC8sXFxzPy8pO1xuICAgIHRoaXMubW9kaWZpZXJzID0gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtdG9nZ2xlLW1vZGlmaWVyXCIpLnNwbGl0KC8sXFxzPy8pO1xuICAgIHRoaXMudGFyZ2V0cyA9IFtdO1xuICAgIGZvcih2YXIgaT0wOyBpPHRoaXMuc2VsZWN0b3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnRhcmdldHMucHVzaChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuc2VsZWN0b3JzW2ldKSk7XG4gICAgICBpZiggIXRoaXMubW9kaWZpZXJzW2ldICkge1xuICAgICAgICB0aGlzLm1vZGlmaWVyc1tpXSA9IFwiaGlkZGVuXCI7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHRvZ2dsZTogZnVuY3Rpb24oKXtcbiAgICBmb3IodmFyIGk9MDsgaTx0aGlzLnRhcmdldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMudGFyZ2V0c1tpXS5jbGFzc0xpc3QudG9nZ2xlKHRoaXMubW9kaWZpZXJzW2ldKVxuICAgIH1cbiAgfSxcblxuICBpbml0RXZlbnRzOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKXtcbiAgICAgIHNlbGYudG9nZ2xlKCk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSlcbiAgfVxufVxuXG52YXIgVG9nZ2xlck1hbmFnZXIgPSB7XG5cbiAgdG9nZ2xlcnM6IFtdLFxuXG4gIGZpbmRCeUVsZW1lbnQ6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICBmb3IodmFyIGk9MDsgaTx0aGlzLnRvZ2dsZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZih0aGlzLnRvZ2dsZXJzW2ldLmVsZW1lbnQgPT09IGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9nZ2xlcnNbaV1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIFxuICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiKltkYXRhLXRvZ2dsZS10YXJnZXRdXCIpO1xuICAgIGZvcih2YXIgaT0wOyBpPGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnRvZ2dsZXJzLnB1c2gobmV3IFRvZ2dsZXIoZWxlbWVudHNbaV0pKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHtUb2dnbGVyfTtcblxuZXhwb3J0IGRlZmF1bHQgVG9nZ2xlck1hbmFnZXI7IiwiaW1wb3J0IENhcm91c2VsIGZyb20gXCIuL2NvbXBvbmVudHMvY2Fyb3VzZWwuanNcIjtcbmltcG9ydCBUaHVtYm5haWxzIGZyb20gXCIuL2NvbXBvbmVudHMvdGh1bWJuYWlscy5qc1wiO1xuaW1wb3J0IFRvZ2dsZXJNYW5hZ2VyIGZyb20gXCIuL2NvbXBvbmVudHMvdG9nZ2xlci5qc1wiO1xuaW1wb3J0IHtUb2dnbGVyfSBmcm9tIFwiLi9jb21wb25lbnRzL3RvZ2dsZXIuanNcIjtcblxuXG52YXIgb2Zmc2V0VG9wID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIHZhciB0b3AgPSAwLCBsZWZ0ID0gMDtcbiAgICBkbyB7XG4gICAgICAgIHRvcCArPSBlbGVtZW50Lm9mZnNldFRvcCAgfHwgMDtcbiAgICAgICAgbGVmdCArPSBlbGVtZW50Lm9mZnNldExlZnQgfHwgMDtcbiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQub2Zmc2V0UGFyZW50O1xuICAgIH0gd2hpbGUoZWxlbWVudCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB0b3A6IHRvcCxcbiAgICAgICAgbGVmdDogbGVmdFxuICAgIH07XG59O1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyh3aW5kb3csIHtcbiAgICBzY3JvbGxUb3A6IHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gKChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCkgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3ApO1xuICAgICAgICAgICAgc2Nyb2xsVG9wID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuZnVuY3Rpb24gbWFuYWdlSG9tZUNhcm91c2VsKCl7XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2hvbWUtY2Fyb3VzZWxcIikpIHtcbiAgICB2YXIgc2VjdGlvbkNhcm91c2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhbmNob3ItMlwiKTtcblxuICAgIHZhciB0aHVtYm5haWxzID0gbmV3IFRodW1ibmFpbHMoc2VjdGlvbkNhcm91c2VsLnF1ZXJ5U2VsZWN0b3IoXCIudGh1bWJuYWlsc1wiKSk7XG4gICAgdmFyIGNhcm91c2VsID0gbmV3IENhcm91c2VsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaG9tZS1jYXJvdXNlbFwiKSk7XG4gICAgY2Fyb3VzZWwub25DaGFuZ2UgPSBmdW5jdGlvbihjdXJyZW50LCBsYXN0LCByYW5rKSB7XG4gICAgICAvL2xhc3QucXVlcnlTZWxlY3RvcihcIi5idG4tbW9ycGgtY3Jvc3NcIikuY2xpY2soKTtcbiAgICAgIHZhciB0b2dnbGVyID0gVG9nZ2xlck1hbmFnZXIuZmluZEJ5RWxlbWVudChsYXN0LnF1ZXJ5U2VsZWN0b3IoXCIuYnRuLW1vcnBoLWNyb3NzXCIpKTtcbiAgICAgIGlmKCB0b2dnbGVyICYmIHRvZ2dsZXIuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJidG4tbW9ycGgtY3Jvc3MtLWFjdGl2ZVwiKSApIHtcbiAgICAgICAgdG9nZ2xlci50b2dnbGUoKTtcbiAgICAgIH1cbiAgICAgIHRodW1ibmFpbHMuY3VycmVudCA9IHJhbms7XG4gICAgfVxuICB9XG59XG5cblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uKCl7XG4gIG1hbmFnZUhvbWVDYXJvdXNlbCgpO1xuICBUb2dnbGVyTWFuYWdlci5pbml0KCk7XG59KTsiXX0="}